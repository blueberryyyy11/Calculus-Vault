# Дополнительные операции

### Ограниченная сумма:
Пусть дана арифметическая функция $f(x_1, \dots, x_n, i)$.  
Определим новую операцию под названием **ограниченная сумма**:

$$
g(x_1, \dots, x_n, y) = \sum_{i < y} f(x_1, \dots, x_n, i)
$$

**Условия:**

$$
\begin{cases} 
g(x_1, \dots, x_n, 0) = 0, \\
g(x_1, \dots, x_n, y+1) = f(x_1, \dots, x_n, 0) + f(x_1, \dots, x_n, 1) + \dots + f(x_1, \dots, x_n, y).
\end{cases}
$$

# Теорема 1

Пусть функция $f$ от $n+1$ переменных является примитивно (общерекурсивной, ~~частично-рекурсивной~~(если чрф, то на каком-то шаге появится неопределённость)) функцией.  
Тогда функция $g$ от $n+1$ переменных, определяемая как:

$$
g(x_1, \dots, x_n, y) = \sum_{i < y} f(x_1, \dots, x_n, i),
$$

будет также примитивно (общерекурсивной, частично-рекурсивной) функцией.

**Доказательство**:

Из определения:
$$
\begin{cases} 
g(x_1, \dots, x_n, 0) = 0, \\
g(x_1, \dots, x_n, y+1) = g(x_1, \dots, x_n, y) + f(x_1, \dots, x_n, y),
\end{cases}
$$

следует, что функция $g(x_1, \dots, x_n, y)$ получается примитивной рекурсией, где:

$$
\alpha(x_1, \dots, x_n) = 0(x_1, \dots, x_n),
$$
$$
\beta(x_1, \dots, x_n, y, z) = z + f(x_1, \dots, x_n, y).
$$
*тут впервые у не фиктивная в $\beta$*

Отсюда:
$$
g(x_1, \dots, x_n, y) = R(O(x_1, \dots, x_n), z + f(x_1, \dots, x_n, y)).
$$

Так как $\alpha, \beta \in \text{ПРФ} (\text{ОРФ})$, а $g$ получается примитивной рекурсией над $\alpha$ и $\beta$, то $g \in \text{ПРФ} (\text{ОРФ})$.

**Q.E.D.**


## Следствие 1

Пусть функция $f$ от $n+1$ переменных примитивно (общерекурсивна).  
Тогда функция $g'$ от $n+1$ переменных, определённая как ограниченная сумма:

$$
g'(x_1, \dots, x_n, y) = \sum_{i=0}^{y} f(x_1, \dots, x_n, i),
$$

будет также примитивно (общерекурсивной).


**Доказательство:**
$$
g'(x_1, \dots, x_n, y) = \sum_{i=0}^{y} f(x_1, \dots, x_n, i) = \sum_{i<y+1} f(x_1, \dots, x_n, i).
$$

**Q.E.D.**


## Следствие 2

Пусть функция $f$ от $n+1$ переменных примитивно (общерекурсивна).  
Тогда функция от $n+2$ переменных, определённая следующим образом:

$$
g(x_1, \dots, x_n, y, z) = 
\begin{cases} 
\sum_{i=y}^{z} f(x_1, \dots, x_n, i), & y \leq z, \\
0, & y > z,
\end{cases}
$$

будет также примитивно (общерекурсивной).

**Доказательство:**
$$
g(x_1, \dots, x_n, y, z) = \sum_{i<z+1} f(x_1, \dots, x_n, i) - \sum_{i<y} f(x_1, \dots, x_n, i).
$$

**Q.E.D.**

## Следствие 3

Если функции $f, k, h$ являются примитивно (общерекурсивными), то функция от $n$ переменных, определённая следующим образом:

$$
g'(x_1, \dots, x_n) = \sum_{i=k(x_1, \dots, x_n)}^{h(x_1, \dots, x_n)} f(x_1, \dots, x_n, i),
$$

будет также примитивно (общерекурсивной).


##### Пример использования ограниченной суммы:

Как известно, $\left\lfloor \frac{x}{y} \right\rfloor \in \text{ЧРФ}$.  
Согласно интуиционистскому определению, $\left\lfloor \frac{x}{0} \right\rfloor$ не определено. Определим $\left\lfloor \frac{x}{y} \right\rfloor$ так, чтобы:

$$
\exists \left\lfloor \frac{x}{y} \right\rfloor = x, \quad \text{а при } y \neq 0 \quad \left\lfloor \frac{x}{y} \right\rfloor.
$$

Покажем, что $\left\lfloor \frac{x}{y} \right\rfloor$ можно получить ограниченной суммой, без применения минимизации:

$$
\left\lfloor \frac{x}{y} \right\rfloor = \sum_{i<x} \overline{sg}((i+1)y - x)).
$$

**Доказательство**:

1. При $y = 0$:

$$
\sum_{i<x} \overline{sg}(i+1)0 - x)) = \sum_{i<x} \overline{sg}(0 - x)) = \sum_{i<x} \overline{sg}(0) = \sum_{i<x} 1 = x = \left\lfloor \frac{x}{0} \right\rfloor.
$$

2. При $y \neq 0$, $\left\lfloor \frac{x}{y} \right\rfloor = n$, это значит $n \cdot y \leq x < (n+1) \cdot y$.  
Из $i < n$ следует $(i+1)y \leq x$, а значит $\overline{sg}((i+1)y - x)) = 1$.  
Если $i \geq n$, то $(i+1)y > x$, а значит $\overline{sg}((i+1)y - x)) = 0$.

---

## Определение функции остатка при делении:
С помощью полученного определения $\left\lfloor \frac{x}{y} \right\rfloor$ можно определить функцию остатка при делении $x$ на $y$:

$$
\text{rest}(x, y) = x - y \cdot \left\lfloor \frac{x}{y} \right\rfloor.
$$

**Заметим**, что:

$$
\text{rest}(x, 0) = x - (0 \cdot \left\lfloor \frac{x}{0} \right\rfloor) = x.
$$

# Ограниченное произведение

Пусть дана арифметическая функция $f(x_1, \dots, x_n, i)$.  
Определим операцию **ограниченного произведения**:

$$
g(x_1, \dots, x_n, y) = \prod_{i<y} f(x_1, \dots, x_n, i),
$$

с правилами:

$$
\begin{cases} 
g(x_1, \dots, x_n, 0) = 1, \\
g(x_1, \dots, x_n, y+1) = f(x_1, \dots, x_n, 0) \cdot f(x_1, \dots, x_n, 1) \cdot \dots \cdot f(x_1, \dots, x_n, y).
\end{cases}
$$


# Теорема 2

Пусть функция $f$ от $n+1$ переменных является примитивно (общерекурсивной).  
Тогда функция $g$ от $n+1$ переменных, определённая как:

$$
g(x_1, \dots, x_n, y) = \prod_{i<y} f(x_1, \dots, x_n, i),
$$

будет также примитивно (общерекурсивной).


**Доказательство:**

Имеем:

$$
\begin{cases} 
g(x_1, \dots, x_n, 0) = 1, \\
g(x_1, \dots, x_n, y+1) = g(x_1, \dots, x_n, y) \cdot f(x_1, \dots, x_n, y).
\end{cases}
$$

Следовательно, функция $g(x_1, \dots, x_n, y)$ определяется примитивной рекурсией, где:

1. $\alpha(x_1, \dots, x_n) = 1(x_1, \dots, x_n)$,
2. $\beta(x_1, \dots, x_n, y, z) = z \cdot f(x_1, \dots, x_n, y)$.

Отсюда:
$$
g(x_1, \dots, x_n, y) = R(1(x_1, \dots, x_n), z \cdot f(x_1, \dots, x_n, y)) \in \text{ПРФ (ОРФ)}.
$$

**Q.E.D.**

## Следствие

Пусть функция $f$ от $n+1$ переменных является примитивно (общерекурсивной).  
Тогда функция $g'$ от $n+1$ переменных, определённая как:

$$
g'(x_1, \dots, x_n, y) = \prod_{i=0}^{y} f(x_1, \dots, x_n, i),
$$

будет также примитивно (общерекурсивной).


# Ограниченная минимизация

Пусть дана арифметическая функция $f(x_1, \dots, x_n, y)$.  
Определим функцию $g$ операцией ограниченной минимизации:

$$
g(x_1, \dots, x_n, z) \stackrel{\sim}{\_} \mu_{y < z} \, (f(x_1, \dots, x_n, y) = 0).
$$

Это значит, что необходимо последовательно проверить значения $f(x_1, \dots, x_n, i)$, где $i = 0, 1, 2, \dots, z-1$,  
и найти минимальный $y$, при котором $f(x_1, \dots, x_n, y) = 0$.

Если же такого $y$ не существует, то:

$$
g(x_1, \dots, x_n, z) = z.
$$


# Теорема 3

Пусть функция $f$ от $n+1$ переменных является примитивно (общерекурсивной).  
Тогда функция $g$ от $n+1$ переменных, определённая как:

$$
g(x_1, \dots, x_n, z) = \mu_{y<z} \, (f(x_1, \dots, x_n, y) = 0),
$$

будет также примитивно (общерекурсивной).


**Доказательство:**

Пусть $f(x_1, x_2, \dots, x_n, y) \in \text{ПРФ}$.  
Рассмотрим функцию $h(x_1, \dots, x_n, i) = sg\left(\prod_{j=0}^{i} f(x_1, \dots, x_n, j)\right)$.

1. Если $f(x_1, \dots, x_n, j) \neq 0, \, \forall j = 0, i$, то $h(x_1, \dots, x_n, i) = 1$.  
2. В противном случае $h(x_1, \dots, x_n, i) = 0$.

Тогда $k$ — первое число меньше $z$, для которого $f(x_1, \dots, x_n, k) = 0$, и $j < k \Rightarrow h(x_1, \dots, x_n, j) = 1$, а $j \geq k \Rightarrow h(x_1, \dots, x_n, j) = 0$.

Таким образом:

$$
k = \sum_{i<z} h(x_1, \dots, x_n, i) = \sum_{i<z} \prod_{j=0}^{i} sg(f(x_1, \dots, x_n, j)).
$$

Если $f(x_1, \dots, x_n, i) \neq 0, \, i = 0, 1, \dots, z-1$, то $g(x_1, \dots, x_n, z) = z$, так как:

$$
\sum_{i<z} h(x_1, \dots, x_n, i) = \sum_{i<z} 1 = z.
$$

Следовательно:

$$
g(x_1, \dots, x_n, z) = \mu_{y<z} \, (f(x_1, \dots, x_n, y) = 0) = \sum_{i<z} \prod_{j=0}^{i} sg(f(x_1, \dots, x_n, j)).
$$

Так как $f$, $sg \in \text{ПРФ (ОРФ)}$, то согласно Теоремам 1 и 2, $g(x_1, \dots, x_n, z) \in \text{ПРФ (ОРФ)}$.

**Q.E.D.**

---
### Для $\sqrt[y]{x}$ (задача на стр. 93, վարժ. 8)
Используем аналогичную последовательность:

$$
s̅g̅(0y - x), \quad s̅g̅(1y - x), \quad \dots, \quad s̅g̅(ny - x), \quad s̅g̅((n+1)y - x), \quad \dots
$$

---

### Для $\log_y(x)$ (задача на стр. 93, վարժ. 9)
Аналогично:

$$
s̅g̅(y^0 - x), \quad s̅g̅(y^1 - x), \quad \dots, \quad s̅g̅(y^n - x), \quad s̅g̅(y^{n+1} - x), \quad \dots
$$
