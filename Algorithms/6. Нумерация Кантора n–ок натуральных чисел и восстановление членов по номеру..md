### Идея Канторовской нумерации пар натуральных чисел

Следуя наклонным диагоналям следующей таблицы:  
$$
\begin{array}{cccccccc}
(0,0) & (0,1) & (0,2) & (0,3) & \dots \\
(1,0) & (1,1) & (1,2) & (1,3) & \dots \\
(2,0) & (2,1) & (2,2) & (2,3) & \dots \\
(3,0) & (3,1) & (3,2) & (3,3) & \dots \\
\vdots & \vdots & \vdots & \vdots & \ddots
\end{array}
$$

Диагонали содержат пары:

(0,0) | (0,1) (1,0) | (0,2) (1,1) (2,0)| … |(0,x+y)…(x,y)…(x+y,0)…..

1 ---------- 2 ------------- 3 -------------------- x+y+1

C(0,0)=0, C(0,1)=1, C(1,0)=2, ……

На диагонале сумма х и у совпадает.

#### Нумерация пар
$$
C(0,0) = 0, \quad C(0,1) = 1, \quad C(1,0) = 2, \quad \dots
$$

Для пары $(x, y)$:
$$
C(x, y) = \frac{(x+y)(x+y+1)}{2} + x.
$$
$C^2(x,y) = \frac{(x+y)(x+y+1)}{2}+(x+1)-1=[\frac{(x+y)(x+y+1)}{2}]+x$ **прим. рек.ф-ия**
------------------------добавляем целую часть, чтобы превратить в п.р.ф
$C^2(x,y)=C(x,y)=n$

---

### Обратные примитивно-рекурсивные функции

Для восстановления $x$ и $y$ из их номера $n$:
- $\ell(n) = x$ — левая часть пары,
- $r(n) = y$ — правая часть пары,
- $C(\ell(n), r(n)) = n$.
- ℓ(c(x,y)) = x
- r(c(x,y)) = y

---

#### Формулы для вычисления
Рассмотрим уравнение:
$$
\frac{(x+y)(x+y+1)}{2} + x = n.
$$

Преобразования:
1. $(x+y)(x+y+1) + 2x = 2n$, $(\cdot 4, +1)$
2. $(2x+2y)(2x+2y+2) + 8x + 1 = 8n + 1$,
3. $(2x+2y+1)^2 + 8x = 8n + 1$,
4. $(2x+2y+3)^2-8y-8=8n+1$
5. $(2x+2y+1)^2 ≤ 8n+1< (2x+2y+3)2 ([√],+1)$
6. $2x+2y+2 ≤ [√8n+1]+1< 2x+2y+4 ([/2])$. $([/2])$
7. $x+y+1≤[([√8n+1]+1)/2]< x+y+2$

Пусть $f(n) = \left\lfloor \frac{\sqrt{8n+1} + 1}{2} \right\rfloor$.

Тогда:
$$
x + y + 1 = f(n), \quad x = n - \frac{(f(n) - 1)f(n)}{2}, \quad y = (f(n) - 1) - x.
$$

---

### Нумерация $n$-ок натуральных чисел

Для $n = 1, 3, 4, \dots$:  
$$c^1(x) = x,$$ $$c^3(x, y, z) = c(c(x, y), z),$$ $$c^n(x_1, x_2, \dots, x_n) = c^{n-1}(c(x_1, x_2), x_3, \dots, x_n),$$ или эквивалентно: $$c^n(x_1, x_2, \dots, x_n) = c^{n-2}(c(c(x_1, x_2), x_3), \dots, x_n),$$ или: $$c^n(x_1, x_2, \dots, x_n) = c(c^{n-1}(x_1, x_2, \dots, x_{n-1}), x_n).$$

---
Пусть $C^n(x_1, x_2, \ldots, x_n) = m$

$$
C_{n_i}(m) = x_i, \quad i \in \{1, 2, \ldots, n\}
$$

**Восстанавливающие функции** определяются следующим образом:

$$
\begin{aligned}
&x_1 = C_{n_n}(m) = \ell(\ell(\ldots \ell(m)\ldots)) \equiv \ell^{n-1}(m), \\
&x_2 = C_{n_{n-1}}(m) = r(\ell(\ldots \ell(m)\ldots)) \equiv r \ell^{n-2}(m), \\
&\vdots \\
&x_i = C_{n_{n-i+1}}(m) = r(\ell(\ldots \ell(m)\ldots)) \equiv r \ell^{n-i}(m), \quad 1 < i < n, \\
&x_n = C_{n_1}(m) = r(m).
\end{aligned}
$$

*Заметим, что:*

$$
C^n(C_{n_1}(x), C_{n_2}(x), \ldots, C_{n_n}(x)) = x,
$$

$$
C_{n_i}(C^n(x_1, \ldots, x_n)) = x_i, \quad i = 1, \ldots, n.
$$
