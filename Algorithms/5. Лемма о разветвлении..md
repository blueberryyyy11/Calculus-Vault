*Обосновать недопустимость примененя леммы о разветвлении к невсюду определенным ф-иям.*

### Лемма о разветвлении

**Определение:**  
Скажем, что предикаты $R_1(x_1, \dots, x_n), R_2(x_1, \dots, x_n), \dots, R_m(x_1, \dots, x_n)$ являются *взаимноисключающими*, если для любого набора $a_1, \dots, a_n$ существует не более чем один $i$, такой что $R_i(a_1, \dots, a_n) = \text{И}.$

Пусть заданы арифметические функции $f_1(x_1, \dots, x_n), f_2(x_1, \dots, x_n), \dots, f_{m+1}(x_1, \dots, x_n)$  
и взаимноисключающие предикаты $R_1(x_1, \dots, x_n), R_2(x_1, \dots, x_n), \dots, R_m(x_1, \dots, x_n)$.  
Функция $f(x_1, \dots, x_n)$ определяется следующим образом:

$$
(*)f(x_1, \dots, x_n) =
\begin{cases} 
f_1(x_1, \dots, x_n), & \text{если } R_1(x_1, \dots, x_n) = \text{И}, \\
f_2(x_1, \dots, x_n), & \text{если } R_2(x_1, \dots, x_n) = \text{И}, \\   
\vdots \\
f_m(x_1, \dots, x_n), & \text{если } R_m(x_1, \dots, x_n) = \text{И}, \\
f_{m+1}(x_1, \dots, x_n), & \text{в остальных случаях}.
\end{cases}
$$

В таком случае говорят, что $f$ задана перечислением случаев — **разветвлением**.

---

### Лемма о разветвлении:
Если функции $f_1, f_2, \dots, f_m, f_{m+1}$ и предикаты $R_1, R_2, \dots, R_m$ примитивно (общерекурсивны),  
причём предикаты к тому же взаимноисключающие,  
*тогда* функция $f$, заданная системой $(*)$, будет также *примитивно (обще) рекурсивной.*

**Доказательство:**  
Пусть $f_k(x_1, \dots, x_n), \, k = 1, \dots, m+1$ и $R_k(x_1, \dots, x_n), \, k = 1, \dots, m$ примитивно-рекурсивны. Предикаты взаимноисключающие.  
$\chi_k(x_1, \dots, x_n), \, k = 1, \dots, m$ — характеристические функции этих предикатов (следовательно, они также примитивно-рекурсивны).  

Тогда функцию $f$ можно определить следующим выражением:
$$
f = f_1 \cdot \overline{sg}(\chi_1) + \dots + f_m \cdot \overline{sg}(\chi_m) + f_{m+1} \cdot \chi_1 \cdot \dots \cdot \chi_m.
$$

Эта функция сохраняет примитивную рекурсивность. **Q.E.D.**

---

Заметим, что лемма о разветвлении **не может применяться** к не всюду определённым функциям.  
В качестве контрпримера предположим, что для некоторого набора $a_1, \dots, a_n$: 
- $f_1(a_1, \dots, a_n)$ определено,
- но $f_2(a_1, \dots, a_n)$ не определено.

В таком случае значение $f(a_1, \dots, a_n)$, заданное равенствами ($*$), будет также неопределённым, то есть его не удастся вычислить.

---

### Теорема:
Если функции $f_1, \dots, f_{m}$ и предикаты $R_1, \dots, R_m$ примитивно (общерекурсивны), причём предикаты взаимноисключающие,  
*тогда* функция $g$, заданная как:
$$
g(x_1, \dots, x_n) =
\begin{cases} 
f_1(x_1, \dots, x_n), & \text{если } R_1(x_1, \dots, x_n) = \text{И}, \\
\vdots \\
f_m(x_1, \dots, x_n), & \text{если } R_m(x_1, \dots, x_n) = \text{И}, \\
\not{!}g(x_1, \dots, x_n), & \text{в остальных случаях},
\end{cases}
$$

будет *частично-рекурсивной.*

**Доказательство:**  
Аналогично лемме о разветвлении:  
$$
g \stackrel{\sim}{\_} f_1 \cdot \overline{sg}(\chi_1) + \dots + f_m \cdot \overline{sg}(\chi_m) + \mu_t(\chi_1\cdot \dots \cdot \chi_m+ t\ = 0),
$$
где $\mu_t(\chi_1\cdot \dots \cdot \chi_m+ t\ = 0)$ используется для корректного определения $g$ в случае, если предикаты $R_1, \dots, R_m$ не срабатывают. **Q.E.D.**

---

*Пример:*  

$$
f(x, y) =
\begin{cases} 
2x + y, & \text{если } x \text{ и } y \text{ нечётные}, \\
(2x)^y, & \text{если } x \text{ чётный или } y = 4, \\
3y, & \text{в остальных случаях}.
\end{cases}
$$

---

- $f_1(x, y) = 2x + y = S(x + y, 2x, x) \in \text{ПРФ}$,
- $f_2(x, y) = (2x)^y = S(x^y, 2x, x) \in \text{ПРФ}$,
- $f_3(x, y) = 3y = \lambda y \, (3y) \in \text{ПРФ}$.

---

$P_1:$ "x и y нечётные"  
$$
\chi_1 = \overline{sg} \left( \overline{sg} \left( rm(x, 2) \right) \cdot \overline{sg} \left( rm(y, 2) \right) \right)
$$

$P_2:$ "x чётный или y = 4"  
$$
\chi_2 = \overline{sg} \left( rm(x, 2) \right) + \overline{sg} \left( y - 4 \right)
$$

Функция $f(x, y)$:
$$
f(x, y) = f_1 \cdot \overline{sg}(\chi_1) + f_2 \cdot \overline{sg}(\chi_2) + f_3 \cdot \overline{sg}(\chi_1 + \chi_2) =
$$

$$
= (2x + y) \cdot \overline{sg} \left( \overline{sg} \left( rm(x, 2) \right) \cdot \overline{sg} \left( rm(y, 2) \right) \right) +
$$

$$
+ (2x)^y \cdot \overline{sg} \left( rm(x, 2) + \overline{sg}(y - 4) \right) +
$$

$$
+ 3y \cdot \overline{sg} \left( \overline{sg} \left( rm(x, 2) \right) + \overline{sg} \left( rm(y, 2) \right) \right) \cdot \overline{sg} \left( rm(x, 2) \cdot (y - 4) \right).
$$

---
##### Заключение:
Лемма о разветвлении требует:  
1. **Примитивной (или частичной) рекурсивности всех функций** $f_1, \dots, f_{m+1}$.   
2. **Полной определённости всех функций** $f_1, \dots, f_{m+1}$ в их областях применения, заданных предикатами $R_1, \dots, R_m$.  

Если хотя бы одна функция $f_i$ не определена на своей области, лемма становится неприменимой, поскольку итоговая функция $f$ не может быть корректно вычислена во всех точках своей области определения.`

